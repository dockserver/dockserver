#!/bin/bash
####################################
# All rights reserved.              #
# started from Zero                 #
# Docker owned dockserver           #
# Docker Maintainer dockserver      #
#####################################
#####################################
# THE DOCKER ARE UNDER LICENSE      #
# NO CUSTOMIZING IS ALLOWED         #
# NO REBRANDING IS ALLOWED          #
# NO CODE MIRRORING IS ALLOWED      #
#####################################
# shellcheck disable=SC2086
# shellcheck disable=SC2006

if [[ $EUID != 0 ]]; then
    sudo "$0" "$@" && exit $?
fi

function rundocker() {

   TZONE=$($(which timedatectl) | $(which grep) -i zone | $(which awk) '{print $3}')
   $(which docker) pull -q docker.dockserver.io/dockserver/docker-client
   ## RUN AS INTERACTIVE SHELL WRAPPER
   $(which docker) run -it \
     --name=dockserver-client \
     --entrypoint /bin/bash \
     -e PUID=1000 -e PGID=1000 \
     -e TZ=$TZONE \
     -v /opt:/opt:rw -v /mnt:/mnt:rw \
     -v /var/run/docker.sock:/var/run/docker.sock:ro \
     docker.dockserver.io/dockserver/docker-client -c '$COMMAND' && \
     clear
   $(which docker) rmi -q docker.dockserver.io/dockserver/docker-client
   
}

COMMAND=$1
rundocker
#E-o-F#
